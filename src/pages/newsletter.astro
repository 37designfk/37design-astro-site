---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import "../styles/global.css";

const benefits = [
  {
    title: "業務効率化のノウハウ",
    description: "AIを活用した実践例や効率化のヒント",
    icon: "M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09Z"
  },
  {
    title: "Webマーケティングのトレンド",
    description: "成果を生む最新の戦略を厳選してお届け",
    icon: "M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"
  },
  {
    title: "最新技術の導入事例",
    description: "他社事例から学ぶ成功の秘訣",
    icon: "M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"
  }
];

const contents = [
  {
    title: "AIと業務自動化の成功事例",
    description: "他社の成功事例をもとに、効率化と生産性向上を実現するための具体的なヒントをご紹介します。"
  },
  {
    title: "Webマーケティングの最新トレンド",
    description: "最新のマーケティング手法やSNS活用法を詳しく解説。成果を上げるための最前線の情報が手に入ります。"
  },
  {
    title: "新しい技術やツールの解説",
    description: "AIやマーケティングオートメーションをはじめとする最新ツールの効果的な活用法をお伝えします。"
  },
  {
    title: "イベントやセミナー情報",
    description: "最新技術やノウハウを学べるセミナーや勉強会の情報をいち早くご案内します。"
  }
];
---

<Layout
  title="ニュースレター登録 | 株式会社37Design"
  description="AIとマーケティング自動化の最前線！ビジネスを加速させる実践的ノウハウをお届けするニュースレター。業務効率化、Webマーケティング、最新技術の導入事例など、未来志向の情報をお届けします。"
>
  <Header />

  <main>
    <!-- Hero Section -->
    <section class="relative min-h-[60vh] flex items-center hero-gradient overflow-hidden">
      <!-- Background elements -->
      <div class="absolute inset-0 overflow-hidden pointer-events-none" aria-hidden="true">
        <div class="particle" style="left:10%; animation-duration:8s; animation-delay:0s;"></div>
        <div class="particle" style="left:30%; animation-duration:12s; animation-delay:2s; width:6px; height:6px;"></div>
        <div class="particle" style="left:60%; animation-duration:10s; animation-delay:4s;"></div>
        <div class="particle" style="left:85%; animation-duration:14s; animation-delay:1s; width:3px; height:3px;"></div>
      </div>

      <div class="absolute inset-0 pointer-events-none" aria-hidden="true">
        <div class="absolute top-[20%] right-[15%] w-72 h-72 bg-glow/8 rounded-full blur-[100px] hero-float"></div>
        <div class="absolute bottom-[10%] left-[10%] w-96 h-96 bg-accent-400/5 rounded-full blur-[120px] hero-float-delay"></div>
      </div>

      <div class="relative z-20 max-w-5xl mx-auto px-4 md:px-6 lg:px-8 py-20 md:py-28 w-full text-center">
        <div class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/10 border border-white/10 backdrop-blur-sm mb-6">
          <span class="w-2 h-2 rounded-full bg-accent-400 animate-pulse"></span>
          <span class="text-white/70 text-xs font-medium">無料ニュースレター</span>
        </div>

        <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-black text-white leading-[1.15] mb-6">
          AIとマーケティング自動化の<br />
          <span class="text-accent-400">最前線</span>！
        </h1>

        <p class="text-white/80 text-lg md:text-xl leading-relaxed mb-4 max-w-3xl mx-auto font-semibold">
          ビジネスを加速させる実践的ノウハウをお届け
        </p>

        <p class="text-white/60 text-base md:text-lg leading-relaxed max-w-2xl mx-auto">
          未来志向の情報で、業務効率化と成果向上を実現するニュースレター<br class="hidden md:block" />
          最新のAI活用事例、業務自動化ノウハウ、Webマーケティング戦略を手に入れる！
        </p>
      </div>
    </section>

    <!-- Benefits Section -->
    <section class="py-16 md:py-20 bg-surface">
      <div class="max-w-6xl mx-auto px-4 md:px-6 lg:px-8">
        <div class="text-center mb-12">
          <h2 class="text-2xl md:text-3xl font-bold text-text-primary mb-4">
            このニュースレターで得られる<span class="text-accent-600">3つの価値</span>
          </h2>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8">
          {benefits.map((benefit) => (
            <div class="bg-white rounded-2xl p-8 border border-border hover:border-accent-400/30 hover:shadow-lg transition-all">
              <div class="w-14 h-14 rounded-xl bg-accent-400/10 flex items-center justify-center mb-5">
                <svg class="w-7 h-7 text-accent-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" d={benefit.icon} />
                </svg>
              </div>
              <h3 class="text-lg font-bold text-text-primary mb-2">{benefit.title}</h3>
              <p class="text-sm text-text-secondary leading-relaxed">{benefit.description}</p>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- Contents Section -->
    <section class="py-16 md:py-20 bg-surface-alt">
      <div class="max-w-5xl mx-auto px-4 md:px-6 lg:px-8">
        <div class="text-center mb-12">
          <h2 class="text-2xl md:text-3xl font-bold text-text-primary mb-4">
            登録するとこんな情報が届きます！
          </h2>
          <p class="text-text-secondary">
            株式会社37Designのニュースレターでは、最新の実践ノウハウをお届けします！
          </p>
        </div>

        <div class="space-y-6">
          {contents.map((content, i) => (
            <div class="bg-white rounded-2xl p-6 md:p-8 border border-border hover:border-accent-400/30 transition-all">
              <div class="flex items-start gap-4">
                <div class="w-10 h-10 rounded-lg bg-accent-400/10 flex items-center justify-center shrink-0 mt-1">
                  <span class="text-accent-600 font-bold text-lg">{i + 1}</span>
                </div>
                <div class="flex-1">
                  <h3 class="text-xl font-bold text-text-primary mb-2">{content.title}</h3>
                  <p class="text-text-secondary leading-relaxed">{content.description}</p>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- Form Section -->
    <section class="py-16 md:py-20 lg:py-24 bg-primary-800 relative overflow-hidden">
      <!-- Background glow -->
      <div class="absolute inset-0 pointer-events-none" aria-hidden="true">
        <div class="absolute top-0 left-1/4 w-96 h-96 bg-glow/5 rounded-full blur-[120px]"></div>
        <div class="absolute bottom-0 right-1/4 w-80 h-80 bg-accent-400/5 rounded-full blur-[100px]"></div>
      </div>

      <div class="relative max-w-2xl mx-auto px-4 md:px-6 lg:px-8">
        <div class="text-center mb-10">
          <p class="text-accent-400 text-sm font-semibold tracking-[.2em] uppercase mb-3">Newsletter</p>
          <h2 class="text-2xl md:text-3xl lg:text-4xl font-bold text-white mb-4">
            今すぐ<span class="text-accent-400">無料登録</span>する
          </h2>
          <p class="text-white/60 text-sm md:text-base">
            最新のAI・マーケティング情報を定期的にお届けします
          </p>
        </div>

        <form
          id="newsletter-form"
          class="bg-white rounded-2xl p-6 md:p-8 shadow-[0_4px_24px_rgba(0,0,0,0.2)]"
        >
          <div class="mb-4">
            <label for="company" class="block text-xs font-semibold text-text-secondary mb-1.5">
              会社名
            </label>
            <input
              type="text"
              id="company"
              name="company"
              placeholder="株式会社〇〇"
              class="w-full px-4 py-3 rounded-lg border border-border bg-surface-alt text-sm text-text-body placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent-400 focus:border-transparent transition"
            />
          </div>

          <div class="mb-4">
            <label for="name" class="block text-xs font-semibold text-text-secondary mb-1.5">
              お名前 <span class="text-red-500">*</span>
            </label>
            <input
              type="text"
              id="name"
              name="name"
              required
              placeholder="山田 太郎"
              class="w-full px-4 py-3 rounded-lg border border-border bg-surface-alt text-sm text-text-body placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent-400 focus:border-transparent transition"
            />
          </div>

          <div class="mb-6">
            <label for="email" class="block text-xs font-semibold text-text-secondary mb-1.5">
              メールアドレス <span class="text-red-500">*</span>
            </label>
            <input
              type="email"
              id="email"
              name="email"
              required
              placeholder="info@example.com"
              class="w-full px-4 py-3 rounded-lg border border-border bg-surface-alt text-sm text-text-body placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent-400 focus:border-transparent transition"
            />
          </div>

          <button
            type="submit"
            id="submit-btn"
            class="w-full py-4 bg-accent-400 text-primary-950 font-bold rounded-full hover:bg-accent-300 transition-colors text-base disabled:opacity-50 disabled:cursor-not-allowed"
          >
            無料で登録する
          </button>

          <p class="text-xs text-text-muted text-center mt-3">
            ※ 登録後すぐに確認メールをお送りします
          </p>

          <!-- Success message (hidden by default) -->
          <div id="success-msg" class="hidden mt-6 p-4 bg-green-50 border border-green-200 rounded-lg">
            <div class="flex items-center gap-2 text-green-700">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" />
              </svg>
              <p class="font-semibold text-sm">登録完了！</p>
            </div>
            <p class="text-sm text-green-600 mt-1">ありがとうございます。確認メールをお送りしました。</p>
          </div>
        </form>

        <p class="text-white/40 text-xs text-center mt-6">
          いつでも配信停止できます。プライバシーポリシーに従って情報を管理します。
        </p>
      </div>
    </section>
  </main>

  <Footer />
</Layout>

<script is:inline>
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('newsletter-form');
    const submitBtn = document.getElementById('submit-btn');
    const successMsg = document.getElementById('success-msg');

    form?.addEventListener('submit', async (e) => {
      e.preventDefault();

      // Disable submit button
      submitBtn.disabled = true;
      submitBtn.textContent = '送信中...';

      const formData = new FormData(form);
      const data = {
        company: formData.get('company') || '',
        name: formData.get('name'),
        email: formData.get('email'),
      };

      try {
        // TODO: n8n webhook URLを設定してください
        const response = await fetch('https://n8n-onprem.37d.jp/webhook/newsletter', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data),
        });

        if (response.ok) {
          // Show success message
          form.reset();
          successMsg?.classList.remove('hidden');

          // Hide success message after 5 seconds
          setTimeout(() => {
            successMsg?.classList.add('hidden');
          }, 5000);
        } else {
          alert('登録に失敗しました。もう一度お試しください。');
        }
      } catch (error) {
        console.error('Error:', error);
        alert('登録に失敗しました。もう一度お試しください。');
      } finally {
        // Re-enable submit button
        submitBtn.disabled = false;
        submitBtn.textContent = '無料で登録する';
      }
    });
  });
</script>
