---
const newsItems = [
  { date: "2026.02.06", text: "Webサイトをリニューアルしました" },
  { date: "2026.01.15", text: "業務自動化スターターパックの提供を開始しました" },
  { date: "2025.12.01", text: "AI導入支援サービスを拡充しました" },
];

const inquiryTypes = [
  "業務自動化について",
  "CRM・顧客管理の導入",
  "AI導入・活用について",
  "料金・プランについて",
  "その他",
];
---

<!-- News Section -->
<section id="news" class="py-16 md:py-20 lg:py-24 bg-surface-alt">
  <div class="max-w-4xl mx-auto px-4 md:px-6 lg:px-8">
    <div class="text-center mb-10 animate-on-scroll">
      <p class="text-primary-500 text-sm font-semibold tracking-[.2em] uppercase mb-3">News</p>
      <h2 class="text-2xl md:text-3xl font-bold text-text-primary">新着情報</h2>
    </div>
    <div class="animate-on-scroll">
      {newsItems.map((item) => (
        <div class="flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-6 py-4 border-b border-border">
          <time class="text-sm text-text-muted font-medium shrink-0">{item.date}</time>
          <p class="text-text-body text-sm">{item.text}</p>
        </div>
      ))}
    </div>
  </div>
</section>

<!-- Contact Section with Form -->
<section id="contact" class="py-16 md:py-20 lg:py-24 bg-primary-800 relative overflow-hidden">
  <!-- Background glow -->
  <div class="absolute inset-0 pointer-events-none" aria-hidden="true">
    <div class="absolute top-0 left-1/4 w-96 h-96 bg-glow/5 rounded-full blur-[120px]"></div>
    <div class="absolute bottom-0 right-1/4 w-80 h-80 bg-accent-400/5 rounded-full blur-[100px]"></div>
  </div>

  <div class="relative max-w-5xl mx-auto px-4 md:px-6 lg:px-8">
    <!-- Urgency banner -->
    <div class="animate-on-scroll text-center mb-6">
      <div class="inline-flex items-center gap-2 px-5 py-2 rounded-full bg-accent-400/10 border border-accent-400/20">
        <span class="w-2 h-2 rounded-full bg-accent-400 animate-pulse"></span>
        <span class="text-accent-400 text-sm font-semibold">今月の無料診断枠：残りわずか</span>
      </div>
    </div>

    <div class="text-center mb-10 md:mb-14 animate-on-scroll">
      <p class="text-accent-400 text-sm font-semibold tracking-[.2em] uppercase mb-3">Contact</p>
      <h2 class="text-2xl md:text-3xl lg:text-4xl font-bold text-white mb-4">
        1分で完了！<span class="text-accent-400">無料AI診断</span>を受ける
      </h2>
      <p class="text-white/50 text-sm md:text-base max-w-xl mx-auto">
        「何から始めればいい？」でOKです。現状のお悩みをお聞かせいただければ、最適なプランをご提案します。
      </p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-5 gap-8 lg:gap-12">
      <!-- Form (Main) -->
      <div class="lg:col-span-3 animate-on-scroll">
        <form
          id="contact-form"
          class="bg-white rounded-2xl p-6 md:p-8 shadow-[0_4px_24px_rgba(0,0,0,0.2)]"
        >
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
            <div>
              <label for="company" class="block text-xs font-semibold text-text-secondary mb-1.5">
                会社名 <span class="text-red-500">*</span>
              </label>
              <input
                type="text"
                id="company"
                name="company"
                required
                placeholder="株式会社〇〇"
                class="w-full px-4 py-3 rounded-lg border border-border bg-surface-alt text-sm text-text-body placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent-400 focus:border-transparent transition"
              />
            </div>
            <div>
              <label for="name" class="block text-xs font-semibold text-text-secondary mb-1.5">
                お名前 <span class="text-red-500">*</span>
              </label>
              <input
                type="text"
                id="name"
                name="name"
                required
                placeholder="山田 太郎"
                class="w-full px-4 py-3 rounded-lg border border-border bg-surface-alt text-sm text-text-body placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent-400 focus:border-transparent transition"
              />
            </div>
          </div>

          <div class="mb-4">
            <label for="email" class="block text-xs font-semibold text-text-secondary mb-1.5">
              メールアドレス <span class="text-red-500">*</span>
            </label>
            <input
              type="email"
              id="email"
              name="email"
              required
              placeholder="info@example.com"
              class="w-full px-4 py-3 rounded-lg border border-border bg-surface-alt text-sm text-text-body placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent-400 focus:border-transparent transition"
            />
          </div>

          <div class="mb-4">
            <label for="type" class="block text-xs font-semibold text-text-secondary mb-1.5">
              ご相談内容 <span class="text-red-500">*</span>
            </label>
            <select
              id="type"
              name="type"
              required
              class="w-full px-4 py-3 rounded-lg border border-border bg-surface-alt text-sm text-text-body focus:outline-none focus:ring-2 focus:ring-accent-400 focus:border-transparent transition"
            >
              <option value="" disabled selected>選択してください</option>
              {inquiryTypes.map((t) => (
                <option value={t}>{t}</option>
              ))}
            </select>
          </div>

          <div class="mb-6">
            <label for="message" class="block text-xs font-semibold text-text-secondary mb-1.5">
              メッセージ（任意）
            </label>
            <textarea
              id="message"
              name="message"
              rows="4"
              placeholder="現在のお悩みや、気になっていることをお気軽にどうぞ"
              class="w-full px-4 py-3 rounded-lg border border-border bg-surface-alt text-sm text-text-body placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent-400 focus:border-transparent transition resize-none"
            ></textarea>
          </div>

          <button
            type="submit"
            id="submit-btn"
            class="w-full py-4 bg-accent-400 text-primary-950 font-bold rounded-full hover:bg-accent-300 transition-colors text-base disabled:opacity-50 disabled:cursor-not-allowed"
          >
            無料診断を申し込む（1分で完了）
          </button>
          <p class="text-xs text-text-muted text-center mt-3">
            ※ 送信後、1営業日以内にご連絡いたします
          </p>

          <!-- Success message (hidden by default) -->
          <div id="success-msg" class="hidden mt-6 p-4 bg-green-50 border border-green-200 rounded-lg">
            <div class="flex items-center gap-2 text-green-700">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" />
              </svg>
              <p class="font-semibold text-sm">送信完了！</p>
            </div>
            <p class="text-sm text-green-600 mt-1">ありがとうございます。1営業日以内にご連絡いたします。</p>
          </div>
        </form>
      </div>

      <!-- Sub channels (Side) -->
      <div class="lg:col-span-2 animate-on-scroll flex flex-col gap-5" style="animation-delay: 0.15s">
        <!-- LINE -->
        <a
          href="https://jmp9xv65.autosns.app/line"
          target="_blank"
          rel="noopener noreferrer"
          class="flex items-center gap-4 p-5 rounded-2xl bg-[#06C755] text-white hover:bg-[#05b64d] transition-colors"
        >
          <svg class="w-10 h-10 shrink-0" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.627-.63h2.386c.349 0 .63.285.63.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.627-.63.349 0 .631.285.631.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.281.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314" />
          </svg>
          <div>
            <p class="font-bold text-sm">公式LINEで相談</p>
            <p class="text-white/70 text-xs mt-0.5">チャットで気軽に質問できます</p>
          </div>
        </a>

        <!-- Phone -->
        <a
          href="tel:080-2412-2556"
          class="flex items-center gap-4 p-5 rounded-2xl bg-white/10 text-white hover:bg-white/15 transition-colors border border-white/10"
        >
          <div class="w-10 h-10 rounded-full bg-white/20 flex items-center justify-center shrink-0">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z" />
            </svg>
          </div>
          <div>
            <p class="font-bold text-sm">お電話でのご相談</p>
            <p class="text-white/70 text-xs mt-0.5">080-2412-2556（平日 9:00-18:00）</p>
          </div>
        </a>

        <!-- Trust badges -->
        <div class="rounded-2xl bg-white/5 border border-white/10 p-5">
          <p class="text-white/40 text-xs font-semibold tracking-wider uppercase mb-3">安心ポイント</p>
          <ul class="space-y-2.5">
            <li class="flex items-center gap-2 text-white/70 text-sm">
              <svg class="w-4 h-4 text-accent-400 shrink-0" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" />
              </svg>
              相談・見積り完全無料
            </li>
            <li class="flex items-center gap-2 text-white/70 text-sm">
              <svg class="w-4 h-4 text-accent-400 shrink-0" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" />
              </svg>
              無理な営業は一切しません
            </li>
            <li class="flex items-center gap-2 text-white/70 text-sm">
              <svg class="w-4 h-4 text-accent-400 shrink-0" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" />
              </svg>
              1営業日以内に返信
            </li>
            <li class="flex items-center gap-2 text-white/70 text-sm">
              <svg class="w-4 h-4 text-accent-400 shrink-0" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" />
              </svg>
              オンライン対応OK
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>

<script is:inline>
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('contact-form');
    const submitBtn = document.getElementById('submit-btn');
    const successMsg = document.getElementById('success-msg');

    form?.addEventListener('submit', async (e) => {
      e.preventDefault();

      // Disable submit button
      submitBtn.disabled = true;
      submitBtn.textContent = '送信中...';

      const formData = new FormData(form);
      const data = {
        company: formData.get('company'),
        name: formData.get('name'),
        email: formData.get('email'),
        type: formData.get('type'),
        message: formData.get('message') || '',
      };

      try {
        const response = await fetch('https://n8n-onprem.37d.jp/webhook/ai-diagnosis', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data),
        });

        if (response.ok) {
          // Show success message
          form.reset();
          successMsg?.classList.remove('hidden');

          // Hide success message after 5 seconds
          setTimeout(() => {
            successMsg?.classList.add('hidden');
          }, 5000);
        } else {
          alert('送信に失敗しました。もう一度お試しください。');
        }
      } catch (error) {
        console.error('Error:', error);
        alert('送信に失敗しました。もう一度お試しください。');
      } finally {
        // Re-enable submit button
        submitBtn.disabled = false;
        submitBtn.textContent = '無料診断を申し込む（1分で完了）';
      }
    });
  });
</script>
